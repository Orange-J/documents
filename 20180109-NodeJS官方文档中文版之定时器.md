# Node.js中的定时器

原文地址: https://nodejs.org/en/docs/guides/timers-in-node/

Node.js的定时器模块中含有这样的方法, 它们可以设定在指定时间之后执行某些代码. 定时器函数不需要通过 `require()` 导入, 它们是全局可访问的, 这是为了和浏览器中的JavaScript API保持一致. 为了彻底理解定时器回调何时被执行, 最好先仔细研究一下这篇文章<a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/">事件循环</a>.

# 用Node.js控制时间连续体(Time Continuum)

Node.js的API提供了几种方式来实现在当前时刻过后的某个时间点执行某些代码. 下面的几个函数很常见, 因为绝大多数浏览器中都有, 但实际上Node.js对这些函数有着自己的实现方式. 定时器和操作系统密切相关, 尽管Node.js的API仿照了浏览器中的API, 但在具体实现上有些不同.

## *`setTimeout()`*

`setTimeout()` 用于设定在指定的毫秒数之后执行某些代码. 这个函数和浏览器中的JavaScript API `window.setTimeout()` 类似, 然而Node.js的 `setTimeout()` 不能传入字符串形式的代码.

`setTimeout()` 的接收的第一个参数是要延迟执行的回调, 第二个参数是要延迟的毫秒数. 还可以传入更多的参数, 多出来的这些参数会被传入回调函数., 例如:

```
function myFunc(arg) {
  console.log(`arg was => ${arg}`);
}

setTimeout(myFunc, 1500, 'funky');
```

由于使用了 `setTimeout()`, 上例中的 `myFunc()` 将会在1500ms之后尽可能早地执行.

不能够依赖设定的超时间隔来实现在**精确的**毫秒数之后就执行某些代码. 这是因为其他正在执行的阻塞或不释放事件循环的代码会导致所设定函数推迟执行.